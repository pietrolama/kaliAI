<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <title>GhostBrain KaliAI - Step Executor</title>
  <link rel="stylesheet" href="static/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div class="matrix-bg"></div>

  <!-- Header globale -->
  <header class="global-header">
    <div class="header-left">
      <h1 class="logo">‚ö° GhostBrain KaliAI</h1>
      <span class="subtitle">Step-by-Step Executor</span>
    </div>
    <div class="header-right">
      <span id="model-info" class="model-badge"></span>
      <button id="toggle-sidebar-btn" class="icon-btn" title="Cronologia">üìã</button>
    </div>
  </header>

  <div class="main-layout">
    <!-- Sidebar Cronologia (Left) -->
    <aside class="sidebar" id="chat-history-sidebar">
      <div class="sidebar-header">
        <span>üìö ARCHIVE</span>
        <button id="clear-history-btn" class="icon-btn" title="Format Memory">üóëÔ∏è</button>
      </div>
      <button class="new-chat-btn" id="new-chat-btn">Ôºã NEW MISSION</button>
      <div class="sidebar-list" id="sidebar-list"></div>
    </aside>

    <!-- Main Execution Area (Center) -->
    <main class="execution-panel">
      <!-- Control Bar -->
      <div class="control-bar">
        <div class="input-group">
          <textarea id="user-input"
            placeholder="üí¨ Order Section 9 (e.g., 'Scan 10.10.10.5' or 'Analyze Threat')"></textarea>
          <div class="action-buttons">
            <div class="mode-selector">
              <label class="checkbox-label">
                <input type="checkbox" id="deep-step-toggle" checked>
                <span class="checkbox-text">‚ö° SWARM OPS</span>
              </label>
            </div>
            <button id="send-btn" class="primary-btn">
              <span class="btn-icon">üöÄ</span>
              <span class="btn-text">ENGAGE</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Unified Workspace -->
      <div class="execution-area">
        <div class="unified-container">

          <!-- LEFT: Output & Steps -->
          <div class="output-container">
            <div class="panel-header">
              <h2 id="panel-title">üì° TACTICAL FEED</h2>
              <div class="panel-controls">
                <button id="clear-output-btn" class="icon-btn" title="Clear Feed">üßπ</button>
              </div>
            </div>

            <div id="chat-area" class="chat-area" style="display:none;"></div>
            <div id="deep-steps-panel" class="steps-content">
              <div class="welcome-message">
                <div class="welcome-icon">üß¨</div>
                <h3>SECTION 9 STANDING BY</h3>
                <p>Ready for Offensive Cyber Operations</p>
                <div class="agent-status-grid">
                  <div class="agent-card">
                    <span class="agent-avatar">üß†</span>
                    <span class="agent-name">The Major</span>
                    <span class="agent-role">Strategy</span>
                    <span class="agent-status online">ONLINE</span>
                  </div>
                  <div class="agent-card">
                    <span class="agent-avatar">üí™</span>
                    <span class="agent-name">Batou</span>
                    <span class="agent-role">Combat</span>
                    <span class="agent-status idle">IDLE</span>
                  </div>
                  <div class="agent-card">
                    <span class="agent-avatar">üï∏Ô∏è</span>
                    <span class="agent-name">Ishikawa</span>
                    <span class="agent-role">Intel</span>
                    <span class="agent-status scanning">SCANNING</span>
                  </div>
                  <div class="agent-card">
                    <span class="agent-avatar">üî´</span>
                    <span class="agent-name">Togusa</span>
                    <span class="agent-role">Human Check</span>
                    <span class="agent-status offline">OFFLINE</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- RIGHT: Graph & Terminal -->
          <div class="side-panel">

            <!-- Network Graph Visualization -->
            <div class="graph-panel">
              <div class="panel-header">
                <h3>üåê GOD'S EYE (Graph)</h3>
                <button class="icon-btn" title="Refresh Topology">üîÑ</button>
              </div>
              <div id="network-graph" class="graph-content">
                <!-- Placeholder for D3/Vis.js -->
                <div class="graph-placeholder">No Active Topology</div>
              </div>
            </div>

            <!-- Arena Controls -->
            <div class="arena-controls">
              <button class="arena-btn red">üî¥ ATTACKER (10.10.10.x)</button>
              <button class="arena-btn blue">üîµ VICTIM (10.10.10.5)</button>
            </div>

            <!-- Terminal -->
            <div class="panel-header">
              <h3 id="side-panel-title">üíª SHELL OUTPUT</h3>
              <div class="panel-controls">
                <button id="clear-terminal-btn" class="icon-btn" title="Clear">üßπ</button>
                <button id="toggle-autoscroll-btn" class="icon-btn active" title="Scroll">‚¨áÔ∏è</button>
              </div>
            </div>
            <div id="terminal-content" class="terminal-content">
              <div class="terminal-line system">
                <span class="terminal-prompt">[SYSTEM]</span>
                <span class="terminal-text">Ghost in the Shell initialized. Swarm Link active.</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </main>
  </div>

  <script src="static/script.js"></script>
</body>

</html>