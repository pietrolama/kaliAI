<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>GhostBrain KaliAI - Step Executor</title>
  <link rel="stylesheet" href="static/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="matrix-bg"></div>
  
  <!-- Header globale -->
  <header class="global-header">
    <div class="header-left">
      <h1 class="logo">âš¡ GhostBrain KaliAI</h1>
      <span class="subtitle">Step-by-Step Executor</span>
    </div>
    <div class="header-right">
      <span id="model-info" class="model-badge"></span>
      <button id="toggle-sidebar-btn" class="icon-btn" title="Cronologia">ğŸ“‹</button>
    </div>
  </header>

  <div class="main-layout">
    <!-- Sidebar Cronologia (collassabile) -->
    <aside class="sidebar" id="chat-history-sidebar">
      <div class="sidebar-header">
        <span>ğŸ“š Cronologia</span>
        <button id="clear-history-btn" class="icon-btn" title="Cancella tutto">ğŸ—‘ï¸</button>
      </div>
      <button class="new-chat-btn" id="new-chat-btn">ï¼‹ Nuova Esecuzione</button>
      <div class="sidebar-list" id="sidebar-list"></div>
    </aside>

    <!-- Area principale: Step Execution Panel -->
    <main class="execution-panel">
      <!-- Control Bar -->
      <div class="control-bar">
        <div class="input-group">
          <textarea id="user-input" placeholder="ğŸ’¬ Scrivi qui il tuo messaggio o obiettivo..."></textarea>
          <div class="action-buttons">
            <div class="mode-selector">
              <label class="checkbox-label">
                <input type="checkbox" id="deep-step-toggle">
                <span class="checkbox-text">âš¡ Deep Step</span>
              </label>
              <label class="checkbox-label security-bypass">
                <input type="checkbox" id="security-bypass-toggle">
                <span class="checkbox-text">ğŸ”“ Bypass Security</span>
              </label>
            </div>
            <button id="send-btn" class="primary-btn">
              <span class="btn-icon">ğŸš€</span>
              <span class="btn-text">Invia</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Main Execution Area - Vista Unificata -->
      <div class="execution-area">
        <div class="unified-container">
          <!-- Chat/Step Output Area -->
          <div class="output-container">
            <div class="panel-header">
              <h2 id="panel-title">ğŸ’¬ GhostBrain Assistant</h2>
              <div class="panel-controls">
                <button id="stop-execution-btn" class="icon-btn" style="display:none;" title="Ferma esecuzione">â¹ï¸</button>
                <button id="clear-output-btn" class="icon-btn" title="Pulisci">ğŸ§¹</button>
              </div>
            </div>
            
            <!-- Chat Area -->
            <div id="chat-area" class="chat-area"></div>
            
            <!-- Steps Panel (mostrato solo quando deep-step attivo) -->
            <div id="deep-steps-panel" class="steps-content" style="display:none;">
              <div class="welcome-message">
                <div class="welcome-icon">ğŸ§©</div>
                <h3>ModalitÃ  Deep Step Attivata</h3>
                <p>Il tuo obiettivo verrÃ  suddiviso in step eseguibili automaticamente</p>
                <ul class="feature-list">
                  <li>âœ“ Generazione automatica degli step</li>
                  <li>âœ“ Esecuzione sequenziale intelligente</li>
                  <li>âœ“ Retry con cambio strategia</li>
                  <li>âœ“ Visualizzazione in tempo reale</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Terminal/Info Panel -->
          <div class="side-panel">
            <div class="panel-header">
              <h3 id="side-panel-title">ğŸ’» Terminal Output</h3>
              <div class="panel-controls">
                <button id="clear-terminal-btn" class="icon-btn" title="Pulisci terminale">ğŸ§¹</button>
                <button id="toggle-autoscroll-btn" class="icon-btn active" title="Auto-scroll">â¬‡ï¸</button>
              </div>
            </div>
            <div id="terminal-content" class="terminal-content">
              <div class="terminal-line system">
                <span class="terminal-prompt">[SYSTEM]</span>
                <span class="terminal-text">GhostBrain ready. Attiva Deep Step per esecuzione automatica.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="static/script.js"></script>
</body>
</html>
